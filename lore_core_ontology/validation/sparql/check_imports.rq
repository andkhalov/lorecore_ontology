# check_imports.rq
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

ASK {
  # Для каждого объявления owl:imports
  ?ont a owl:Ontology ;
       owl:imports ?imp .

  # Отрезаем версию (фрагмент после #), чтобы получить «базовый» IRI
  BIND( IRI(REPLACE(str(?imp), "#.*$", "")) AS ?base )

  # Если не найдётся объявленного модуля с этим базовым IRI — это ошибка
  FILTER NOT EXISTS {
    ?base a owl:Ontology .
  }
}